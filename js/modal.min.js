(function(t,e){var o=function(){var e=function(t){t.preventDefault(),t.stopPropagation()},o=!1;return{lock:function(){o||(o=!0,t.body.style.overflow="hidden",t.addEventListener("touchmove",e,!1))},unlock:function(){o=!1,t.body.style.overflow="",t.removeEventListener("touchmove",e,!1)}}}(),n={css:function(t){if(!t||0===t.length)throw new Error('argument "path" is required !');var e=document.getElementsByTagName("head")[0],o=document.createElement("link");o.href=t,o.rel="stylesheet",o.type="text/css",e.appendChild(o)},js:function(t){if(!t||0===t.length)throw new Error('argument "path" is required !');var e=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=t,o.type="text/javascript",e.appendChild(o)}};n.css("/plugins/modal/css/modal.min.css?ver="+Math.random());var l={};!function(){var t=Vue.component("modal-confirm",{template:'<div class="modal-wrap">\t\t\t\t\t\t\t\t<div class="modal-confirm" :class="stylename">\t\t\t\t\t\t\t\t\t<i class="iconfont modal-close" v-if="close === true" @click.stop="closeConfirm()"></i>\t\t\t\t\t\t\t\t\t<div class="modal-title" v-html="title"></div>\t\t\t\t\t\t\t\t\t<div class="modal-inner" v-html="mes"></div>\t\t\t\t\t\t\t\t\t<template v-if="typeof opts == \'function\'">\t\t\t\t\t\t\t\t\t<div class="modal-button-group">\t\t\t\t\t\t\t\t\t\t<button type="button" class="modal-button" @click.stop="closeConfirm()">取消</button>\t\t\t\t\t\t\t\t\t\t<button type="button" class="modal-button" @click.stop="closeConfirm(opts)">确认</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</template>\t\t\t\t\t\t\t\t\t<template v-else>\t\t\t\t\t\t\t\t\t<div class="modal-button-group">\t\t\t\t\t\t\t\t\t\t<button type="button" class="modal-button" :class="item.class" :key="key" v-for="item, key in opts" @click.stop="closeConfirm(item.callback)">{{item.txt}}</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</template>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>',props:{title:String,mes:String,close:{type:Boolean,default:!1},stylename:String,opts:{type:[Array,Function],default:function(){}}}}),e=Vue.extend(t),n=new e({el:document.createElement("div")}),a=function(){o.unlock();var t=n.$el;t.parentNode&&t.parentNode.removeChild(t)};e.prototype.closeConfirm=function(t){"function"==typeof t&&(stopClose=t()),o.unlock();var e=n.$el;e.parentNode&&e.parentNode.removeChild(e),window.removeEventListener("hashchange",a)},l.Confirm=function(t){n.mes=t.mes||"",n.title=t.title||"提示",n.opts=t.opts,n.close=t.close,n.stylename=t.stylename||"",window.addEventListener("hashchange",a),document.body.appendChild(n.$el),o.lock()}}(),!function(){var t=Vue.component("modal-toast",{template:'<div class="modal-wrap" :class="{modalToastNoIcon: !icon}">\t\t\t\t\t\t\t\t<div class="modal-toast" :class="modalClass">\t\t\t\t\t\t\t\t\t<i v-if="icon" class="iconfont" :class="iconsClass"></i>\t\t\t\t\t\t\t\t\t<span class="modal-toast-text" v-html="mes"></span>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>',props:{mes:String,icon:String,styleclass:String,timeout:Number,callback:Function},computed:{iconsClass:function(){var t="";return"success"!==this.icon&&"error"!==this.icon||(t="modal-"+this.icon),t},modalClass:function(){var t="modal-toast-";if(this.styleclass)return t+this.styleclass}}}),e=Vue.extend(t),n=new e({el:document.createElement("div")});e.prototype.closeToast=function(){var t=n.$el;t.parentNode&&t.parentNode.removeChild(t),o.unlock(),"function"==typeof this.callback&&this.callback()},l.Toast=function(t){if(n.mes=t.mes,n.icon=t.icon,n.styleclass=t.styleclass,n.timeout=~~t.timeout||2e3,n.callback=t.callback,document.body.appendChild(n.$el),o.lock(),n.timeout!=-1)var e=setTimeout(function(){clearTimeout(e),n.closeToast()},n.timeout)}}(),!function(){var t=Vue.component("modal-alert",{template:'<div class="modal-wrap">\t\t\t\t\t\t\t\t<div class="modal-alert" :class="stylename">\t\t\t\t\t\t\t\t\t<div class="modal-alert-box">\t\t\t\t\t\t\t\t\t\t<span class="modal-alert-icon"><i class="iconfont" :class="iconsClass"></i></span>\t\t\t\t\t\t\t\t\t\t<span class="modal-alert-text" v-html="mes">\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t<div class="modal-alert-bottom"><span class="modal-alert-button"  @click.stop="closeAlert">{{btntxt}}</span></div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>',props:{mes:String,icon:String,stylename:String,btntxt:{type:String,default:"我知道了"},callback:Function},computed:{iconsClass:function(){var t="modal-alerticon";return"success"!==this.icon&&"error"!==this.icon&&"info"!==this.icon||(t="modal-"+this.icon),t}}}),e=Vue.extend(t),n=new e({el:document.createElement("div")}),a=function(){o.unlock();var t=n.$el;t.parentNode&&t.parentNode.removeChild(t)};e.prototype.closeAlert=function(){o.unlock();var t=n.$el;t.parentNode&&t.parentNode.removeChild(t),window.removeEventListener("hashchange",a),"function"==typeof this.callback&&this.callback()},l.Alert=function(t){n.mes=t.mes,n.icon=t.icon,n.stylename=t.stylename,n.btntxt=t.btntxt||"我知道了",n.callback=t.callback,"string"==typeof t&&(n.mes=t),window.addEventListener("hashchange",a),document.body.appendChild(n.$el),o.lock()}}(),!function(){var t=Vue.component("modal-loading",{template:'<div class="modal-wrap modal-loading-wrap" :class="{pageLoading: type == 2}">\t\t\t\t\t\t\t<div class="modal-loading">\t\t\t\t\t\t\t\t<img :src="loadIcon" />\t\t\t\t\t\t\t\t<div class="modal-loading-text">{{title}}</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>',props:{type:{type:Number,default:1},title:{type:String,default:"加载中"},icon:{type:Number,default:1}},computed:{loadIcon:function(){return this.icon&&1!=this.icon?2==this.icon?"/plugins/modal/img/loading/loading-spinning-bubbles.svg":3==this.icon?"/plugins/modal/img/loading/loading-bubbles.svg":4==this.icon?"/plugins/modal/img/loading/loading-bars.svg":void 0:"/plugins/modal/img/loading/loading-spin.svg"}}}),e=Vue.extend(t),n=new e({el:document.createElement("div")});e.prototype.open=function(t){n.type=1,n.icon=1,"string"==typeof t&&(n.title=t),t||(n.title="正在加载"),"object"==typeof t&&(n.title=t.title||"正在加载",n.icon=t.icon||1,n.type=t.type||1,2==t.type&&(n.icon=2)),document.body.appendChild(n.$el),o.lock()},e.prototype.close=function(){var t=n.$el;t.parentNode&&t.parentNode.removeChild(t),o.unlock()},l.Loading={open:n.open,close:n.close}}(),!function(){var t=Vue.component("modal-notify",{template:'<div class="modal-notify" :class="classes" v-html="mes">\t\t\t\t\t\t\t</div>',data:function(){return{classes:""}},props:{mes:String,timeout:Number,callback:Function}}),e=Vue.extend(t),o=new e({el:document.createElement("div")}),n=null,a=!1;e.prototype.closeNotify=function(){o.classes="model-notify-out",setTimeout(function(){var t=o.$el;t.parentNode&&t.parentNode.removeChild(t),a=!1},150),"function"==typeof this.callback&&this.callback()},l.Notify=function(t){o.classes="",o.mes=t.mes,o.timeout=~~t.timeout||5e3,o.callback=t.callback,a||(a=!0,document.body.appendChild(o.$el),o.$el.addEventListener("click",function(){clearTimeout(n),o.closeNotify()}),n=setTimeout(function(){clearTimeout(n),o.closeNotify()},o.timeout))}}(),!function(){var t=Vue.component("modal-prompt",{template:'<div class="modal-wrap">\t\t\t\t\t\t\t\t<div class="modal-prompt">\t\t\t\t\t\t\t\t\t<div class="modal-title">{{title}}</div>\t\t\t\t\t\t\t\t\t<div class="modal-prompt-box">\t\t\t\t\t\t\t\t\t\t<textarea v-model="inputContent" :placeholder="placeholder" @input="changeInput"></textarea>\t\t\t\t\t\t\t\t\t\t<div class="contentLength"><span>{{inputContent.length}}</span>/{{maxlength}}</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="modal-button-group">\t\t\t\t\t\t\t\t\t\t<button class="modal-button" @click="closePrompt()">取消</button>\t\t\t\t\t\t\t\t\t\t<button class="modal-button" @click="closePrompt(callback)">保存</button>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>',props:{title:String,content:String,placeholder:String,maxlength:String,callback:Function},data:function(){return{inputContent:this.content||""}},methods:{changeInput:function(){this.inputContent.length>=this.maxlength&&(this.inputContent=this.inputContent.substr(0,this.maxlength))}}}),e=Vue.extend(t),n=new e({el:document.createElement("div")}),a=function(){o.unlock();var t=n.$el;t.parentNode&&t.parentNode.removeChild(t)};e.prototype.closePrompt=function(t){"function"==typeof t&&(stopClose=t(n.inputContent)),o.unlock();var e=n.$el;e.parentNode&&e.parentNode.removeChild(e),window.removeEventListener("hashchange",a)},l.Prompt=function(t){n.mes=t.mes||"",n.title=t.title||"编辑",n.inputContent=t.content,n.placeholder=t.placeholder,n.maxlength=t.maxlength||200,n.callback=t.callback,window.addEventListener("hashchange",a),document.body.appendChild(n.$el),o.lock()}}(),Vue.component("modalLayer",{template:'<div class="modal-layer-wrap" :class="klass" v-show="layerShowFlag" @click.self="hide">\t\t\t\t\t<div class="modal-layer-box">\t\t\t\t\t\t<div class="modal-layer-title" v-if="layertitle">{{layertitle}}</div>\t\t\t\t\t\t<div class="modal-layer-body">\t\t\t\t\t\t\t<slot name="body"></slot>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="modal-layer-footer">\t\t\t\t\t\t\t<slot name="foot"></slot>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>',props:{title:{type:String,default:""},stylename:{type:String,default:""}},data:function(){return{layertitle:this.title,layerShowFlag:!1,klass:this.stylename}},methods:{show:function(){this.layerShowFlag=!0},hide:function(){this.layerShowFlag=!1}}}),Vue.prototype.$modal={confirm:l.Confirm,toast:l.Toast,alert:l.Alert,loading:l.Loading,notify:l.Notify,prompt:l.Prompt}})(document,window),!function(t,e){function o(t){e.ajax({type:t.type,url:t.url,data:t.data,dataType:t.dataType,beforeSend:function(){return("function"!=typeof t.beforeSend||t.beforeSend()!==!1)&&void(t.loading&&l.loading.open(t.loading))},success:function(e){0==e.error_code?t.success&&t.success(e):404==e.error_code?location.href="/user/bind":(l.toast({mes:e.error_msg}),t.error&&t.error(e))},error:function(e){l.toast({mes:"咦，遇到错误啦"}),t.error&&t.error(e)},complete:function(){t.loading&&l.loading.close(),t.complete&&t.complete(res)}})}t&&e||console.error("未引入依赖Vue或JQuery");var n=new t,l=n.$modal,a=function(t){var n={};n.type="get",n.loading=!1,n.dataType="json",n.beforeSend=null,n.success=null,n.error=null,n.complete=null,n.confirm=!1,n=e.extend({},n,t),n.confirm?l.confirm({mes:n.confirm,opts:function(){o(n)}}):o(n)};t.prototype.$ajax=a}(Vue,jQuery);